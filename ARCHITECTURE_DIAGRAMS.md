# Architecture Diagrams & Visual Reference

This document provides visual representations of the production architecture to help understand the system design.

---

## 1. System Overview

```
┌─────────────────────────────────────────────────────────────────────┐
│                         AI TEST GENERATOR                            │
│                      Production Architecture                         │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│   Teacher   │         │   Student   │         │    Admin    │
│   Browser   │         │   Browser   │         │   Browser   │
└──────┬──────┘         └──────┬──────┘         └──────┬──────┘
       │                       │                        │
       └───────────────────────┼────────────────────────┘
                               │
                    ┌──────────▼──────────┐
                    │   Next.js Frontend  │
                    │   (React + TS)      │
                    └──────────┬──────────┘
                               │
                    ┌──────────▼──────────┐
                    │  Next.js API Routes │
                    │  (Backend)          │
                    └──────────┬──────────┘
                               │
              ┌────────────────┼────────────────┐
              │                │                │
     ┌────────▼────────┐  ┌───▼────┐  ┌───────▼────────┐
     │  Authentication │  │ Prisma │  │  File Storage  │
     │    Service      │  │  ORM   │  │   (AWS S3)     │
     └─────────────────┘  └───┬────┘  └────────────────┘
                              │
                     ┌────────▼────────┐
                     │   PostgreSQL    │
                     │    Database     │
                     └─────────────────┘
```

---

## 2. User Flow Diagrams

### Teacher Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                      TEACHER USER FLOW                           │
└─────────────────────────────────────────────────────────────────┘

    START
      │
      ▼
┌──────────┐
│ Register │
│  Login   │
└────┬─────┘
     │
     ▼
┌──────────────┐
│   Teacher    │
│  Dashboard   │
└───┬──────────┘
    │
    ├─────────────────────┬─────────────────────┬──────────────┐
    │                     │                     │              │
    ▼                     ▼                     ▼              ▼
┌─────────┐        ┌──────────┐        ┌──────────┐    ┌──────────┐
│ Create  │        │  Manage  │        │  View    │    │  Grade   │
│  Test   │        │  Classes │        │ Results  │    │ Answers  │
└────┬────┘        └────┬─────┘        └────┬─────┘    └────┬─────┘
     │                  │                   │               │
     ▼                  ▼                   │               │
┌─────────┐        ┌──────────┐            │               │
│ Upload  │        │  Create  │            │               │
│  File   │        │  Class   │            │               │
└────┬────┘        └────┬─────┘            │               │
     │                  │                   │               │
     ▼                  ▼                   │               │
┌─────────┐        ┌──────────┐            │               │
│   AI    │        │ Generate │            │               │
│ Extract │        │   Code   │            │               │
│Questions│        └────┬─────┘            │               │
└────┬────┘             │                  │               │
     │                  ▼                  │               │
     ▼            ┌──────────┐             │               │
┌─────────┐      │ Students │             │               │
│ Review  │      │   Join   │             │               │
│  Edit   │      └────┬─────┘             │               │
└────┬────┘           │                   │               │
     │                ▼                   │               │
     ▼          ┌──────────┐              │               │
┌─────────┐    │  Assign  │              │               │
│ Publish │    │   Test   │              │               │
└────┬────┘    └────┬─────┘              │               │
     │              │                     │               │
     └──────────────┴─────────────────────┴───────────────┘
                    │
                    ▼
            ┌──────────────┐
            │   Monitor    │
            │   Results    │
            └──────────────┘
```

### Student Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                      STUDENT USER FLOW                           │
└─────────────────────────────────────────────────────────────────┘

    START
      │
      ▼
┌──────────┐
│ Register │
│  Login   │
└────┬─────┘
     │
     ▼
┌──────────────┐
│   Student    │
│  Dashboard   │
└───┬──────────┘
    │
    ├─────────────────────┬─────────────────────┐
    │                     │                     │
    ▼                     ▼                     ▼
┌─────────┐        ┌──────────┐        ┌──────────┐
│  Join   │        │   View   │        │   View   │
│  Class  │        │ Assigned │        │ Results  │
└────┬────┘        │  Tests   │        └────┬─────┘
     │             └────┬─────┘             │
     ▼                  │                   │
┌─────────┐             ▼                   │
│  Enter  │        ┌──────────┐             │
│  Code   │        │  Select  │             │
└────┬────┘        │   Test   │             │
     │             └────┬─────┘             │
     ▼                  │                   │
┌─────────┐             ▼                   │
│ Confirm │        ┌──────────┐             │
│  Join   │        │  Start   │             │
└─────────┘        │ Attempt  │             │
                   └────┬─────┘             │
                        │                   │
                        ▼                   │
                   ┌──────────┐             │
                   │  Answer  │             │
                   │Questions │             │
                   └────┬─────┘             │
                        │                   │
                        ▼                   │
                   ┌──────────┐             │
                   │  Submit  │             │
                   │  Answers │             │
                   └────┬─────┘             │
                        │                   │
                        └───────────────────┘
                        │
                        ▼
                   ┌──────────┐
                   │   View   │
                   │  Score   │
                   │ & Review │
                   └──────────┘
```

---

## 3. Database Entity Relationship Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                  DATABASE SCHEMA (ERD)                           │
└─────────────────────────────────────────────────────────────────┘

┌──────────────┐
│     User     │
├──────────────┤
│ id (PK)      │
│ email        │◄────────────────────┐
│ passwordHash │                     │
│ role         │                     │
│ firstName    │                     │
│ lastName     │                     │
│ status       │                     │
└───┬──────┬───┘                     │
    │      │                         │
    │      │                         │
    │      └──────────┐              │
    │                 │              │
    ▼                 ▼              │
┌────────────┐  ┌────────────┐      │
│  Teacher   │  │  Student   │      │
│  Profile   │  │  Profile   │      │
├────────────┤  ├────────────┤      │
│ id (PK)    │  │ id (PK)    │      │
│ userId(FK) │  │ userId(FK) │      │
│ department │  │ studentId  │      │
│ subject    │  │ grade      │      │
└─────┬──────┘  └─────┬──────┘      │
      │               │              │
      │               │              │
      ▼               ▼              │
┌──────────┐    ┌────────────┐      │
│   Test   │    │ Enrollment │      │
├──────────┤    ├────────────┤      │
│ id (PK)  │    │ id (PK)    │      │
│teacherId │    │studentId(FK)│     │
│ title    │    │ classId(FK)│      │
│ status   │    └──────┬─────┘      │
│visibility│           │             │
│shareLink │           │             │
└────┬─────┘           │             │
     │                 │             │
     │                 ▼             │
     │           ┌──────────┐        │
     │           │  Class   │        │
     │           ├──────────┤        │
     │           │ id (PK)  │        │
     │           │teacherId │        │
     │           │ name     │        │
     │           │ code     │        │
     │           └────┬─────┘        │
     │                │              │
     ▼                ▼              │
┌──────────┐    ┌────────────┐      │
│ Question │    │   Test     │      │
├──────────┤    │ Assignment │      │
│ id (PK)  │    ├────────────┤      │
│ testId   │    │ id (PK)    │      │
│ text     │    │ testId(FK) │      │
│ type     │    │ classId(FK)│      │
│ options  │    │ dueDate    │      │
│correctAns│    └────────────┘      │
└──────────┘                         │
                                     │
┌────────────┐                       │
│   Test     │                       │
│  Attempt   │                       │
├────────────┤                       │
│ id (PK)    │                       │
│ testId(FK) │                       │
│studentId(FK)                       │
│attemptNum  │                       │
│ status     │                       │
│ score      │                       │
│ startedAt  │                       │
│submittedAt │                       │
└─────┬──────┘                       │
      │                              │
      ▼                              │
┌──────────┐                         │
│  Answer  │                         │
├──────────┤                         │
│ id (PK)  │                         │
│attemptId │                         │
│questionId│                         │
│answerData│                         │
│isCorrect │                         │
└──────────┘                         │
                                     │
┌──────────┐                         │
│ Session  │                         │
├──────────┤                         │
│ id (PK)  │                         │
│ userId(FK)───────────────────────►─┘
│ token    │
│expiresAt │
└──────────┘

┌────────────┐
│ AuditLog   │
├────────────┤
│ id (PK)    │
│ userId(FK) │
│ action     │
│ entityType │
│ entityId   │
│ createdAt  │
└────────────┘
```

---

## 4. Authentication Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                    AUTHENTICATION FLOW                           │
└─────────────────────────────────────────────────────────────────┘

REGISTRATION:
┌────────┐         ┌────────┐         ┌──────────┐
│ Client │         │  API   │         │ Database │
└───┬────┘         └───┬────┘         └────┬─────┘
    │                  │                   │
    │  POST /register  │                   │
    ├─────────────────►│                   │
    │  email, password │                   │
    │  role, name      │                   │
    │                  │                   │
    │                  │ Validate input    │
    │                  ├──────────┐        │
    │                  │          │        │
    │                  │◄─────────┘        │
    │                  │                   │
    │                  │ Hash password     │
    │                  ├──────────┐        │
    │                  │          │        │
    │                  │◄─────────┘        │
    │                  │                   │
    │                  │  Create user      │
    │                  ├──────────────────►│
    │                  │                   │
    │                  │  User created     │
    │                  │◄──────────────────┤
    │                  │                   │
    │                  │ Create session    │
    │                  ├──────────────────►│
    │                  │                   │
    │                  │  Session token    │
    │                  │◄──────────────────┤
    │                  │                   │
    │  Set cookie      │                   │
    │  Return user     │                   │
    │◄─────────────────┤                   │
    │                  │                   │

LOGIN:
┌────────┐         ┌────────┐         ┌──────────┐
│ Client │         │  API   │         │ Database │
└───┬────┘         └───┬────┘         └────┬─────┘
    │                  │                   │
    │  POST /login     │                   │
    ├─────────────────►│                   │
    │  email, password │                   │
    │                  │                   │
    │                  │  Find user        │
    │                  ├──────────────────►│
    │                  │                   │
    │                  │  User data        │
    │                  │◄──────────────────┤
    │                  │                   │
    │                  │ Verify password   │
    │                  ├──────────┐        │
    │                  │          │        │
    │                  │◄─────────┘        │
    │                  │                   │
    │                  │ Create session    │
    │                  ├──────────────────►│
    │                  │                   │
    │                  │  Session token    │
    │                  │◄──────────────────┤
    │                  │                   │
    │  Set cookie      │                   │
    │  Return user     │                   │
    │◄─────────────────┤                   │
    │                  │                   │

AUTHENTICATED REQUEST:
┌────────┐         ┌────────┐         ┌──────────┐
│ Client │         │  API   │         │ Database │
└───┬────┘         └───┬────┘         └────┬─────┘
    │                  │                   │
    │  GET /api/data   │                   │
    ├─────────────────►│                   │
    │  Cookie: session │                   │
    │                  │                   │
    │                  │ Verify session    │
    │                  ├──────────────────►│
    │                  │                   │
    │                  │  User data        │
    │                  │◄──────────────────┤
    │                  │                   │
    │                  │ Check permissions │
    │                  ├──────────┐        │
    │                  │          │        │
    │                  │◄─────────┘        │
    │                  │                   │
    │                  │  Fetch data       │
    │                  ├──────────────────►│
    │                  │                   │
    │                  │  Data             │
    │                  │◄──────────────────┤
    │                  │                   │
    │  Return data     │                   │
    │◄─────────────────┤                   │
    │                  │                   │
```

---

## 5. Test Creation & Taking Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                TEST CREATION & TAKING FLOW                       │
└─────────────────────────────────────────────────────────────────┘

TEACHER CREATES TEST:
┌─────────┐    ┌─────┐    ┌──────┐    ┌────┐    ┌──────┐
│ Teacher │    │ API │    │ File │    │ AI │    │  DB  │
└────┬────┘    └──┬──┘    │Parser│    │LLM │    └──┬───┘
     │            │        └──┬───┘    └─┬──┘       │
     │ Upload PDF │           │          │          │
     ├───────────►│           │          │          │
     │            │           │          │          │
     │            │ Parse file│          │          │
     │            ├──────────►│          │          │
     │            │           │          │          │
     │            │ Text      │          │          │
     │            │◄──────────┤          │          │
     │            │           │          │          │
     │            │ Extract questions    │          │
     │            ├─────────────────────►│          │
     │            │           │          │          │
     │            │ Questions │          │          │
     │            │◄─────────────────────┤          │
     │            │           │          │          │
     │            │ Save test │          │          │
     │            ├─────────────────────────────────►│
     │            │           │          │          │
     │            │ Test ID   │          │          │
     │            │◄─────────────────────────────────┤
     │            │           │          │          │
     │ Test link  │           │          │          │
     │◄───────────┤           │          │          │
     │            │           │          │          │

TEACHER ASSIGNS TEST:
┌─────────┐    ┌─────┐    ┌──────┐
│ Teacher │    │ API │    │  DB  │
└────┬────┘    └──┬──┘    └──┬───┘
     │            │           │
     │ Assign to  │           │
     │ class      │           │
     ├───────────►│           │
     │            │           │
     │            │ Create    │
     │            │assignment │
     │            ├──────────►│
     │            │           │
     │            │ Success   │
     │            │◄──────────┤
     │            │           │
     │ Confirmed  │           │
     │◄───────────┤           │
     │            │           │

STUDENT TAKES TEST:
┌─────────┐    ┌─────┐    ┌──────┐
│ Student │    │ API │    │  DB  │
└────┬────┘    └──┬──┘    └──┬───┘
     │            │           │
     │ Start test │           │
     ├───────────►│           │
     │            │           │
     │            │ Create    │
     │            │ attempt   │
     │            ├──────────►│
     │            │           │
     │            │ Attempt ID│
     │            │◄──────────┤
     │            │           │
     │ Questions  │           │
     │◄───────────┤           │
     │            │           │
     │ Answer Q1  │           │
     ├───────────►│           │
     │            │ Save      │
     │            ├──────────►│
     │            │           │
     │ Answer Q2  │           │
     ├───────────►│           │
     │            │ Save      │
     │            ├──────────►│
     │            │           │
     │ Submit     │           │
     ├───────────►│           │
     │            │           │
     │            │ Grade     │
     │            ├──────────►│
     │            │           │
     │            │ Results   │
     │            │◄──────────┤
     │            │           │
     │ Score &    │           │
     │ feedback   │           │
     │◄───────────┤           │
     │            │           │
```

---

## 6. Role-Based Access Control (RBAC)

```
┌─────────────────────────────────────────────────────────────────┐
│                  ROLE-BASED ACCESS CONTROL                       │
└─────────────────────────────────────────────────────────────────┘

ROLES HIERARCHY:
                    ┌───────┐
                    │ ADMIN │
                    └───┬───┘
                        │
            ┌───────────┴───────────┐
            │                       │
        ┌───▼────┐              ┌───▼────┐
        │TEACHER │              │ PARENT │
        └───┬────┘              └────────┘
            │
        ┌───▼────┐
        │STUDENT │
        └────────┘

PERMISSIONS MATRIX:
┌──────────────────┬─────────┬─────────┬────────┬────────┐
│    Resource      │ Student │ Teacher │ Parent │ Admin  │
├──────────────────┼─────────┼─────────┼────────┼────────┤
│ View own tests   │    ✓    │    ✓    │   ✓    │   ✓    │
│ Take tests       │    ✓    │    ✓    │   ✗    │   ✓    │
│ Create tests     │    ✗    │    ✓    │   ✗    │   ✓    │
│ Edit own tests   │    ✗    │    ✓    │   ✗    │   ✓    │
│ Delete own tests │    ✗    │    ✓    │   ✗    │   ✓    │
│ View all tests   │    ✗    │    ✗    │   ✗    │   ✓    │
│ Create classes   │    ✗    │    ✓    │   ✗    │   ✓    │
│ Join classes     │    ✓    │    ✗    │   ✗    │   ✓    │
│ View results     │   Own   │  Class  │ Child  │  All   │
│ Grade tests      │    ✗    │    ✓    │   ✗    │   ✓    │
│ Manage users     │    ✗    │    ✗    │   ✗    │   ✓    │
│ System settings  │    ✗    │    ✗    │   ✗    │   ✓    │
└──────────────────┴─────────┴─────────┴────────┴────────┘

ACCESS CONTROL FLOW:
┌────────┐         ┌────────────┐         ┌──────────┐
│Request │         │Middleware  │         │ Handler  │
└───┬────┘         └─────┬──────┘         └────┬─────┘
    │                    │                     │
    │  HTTP Request      │                     │
    ├───────────────────►│                     │
    │                    │                     │
    │                    │ Extract session     │
    │                    ├──────────┐          │
    │                    │          │          │
    │                    │◄─────────┘          │
    │                    │                     │
    │                    │ Verify user         │
    │                    ├──────────┐          │
    │                    │          │          │
    │                    │◄─────────┘          │
    │                    │                     │
    │                    │ Check role          │
    │                    ├──────────┐          │
    │                    │          │          │
    │                    │◄─────────┘          │
    │                    │                     │
    │                    │ Check permissions   │
    │                    ├──────────┐          │
    │                    │          │          │
    │                    │◄─────────┘          │
    │                    │                     │
    │                    │ Authorized?         │
    │                    ├──────────┐          │
    │                    │          │          │
    │                    │◄─────────┘          │
    │                    │                     │
    │                    │  Yes: Forward       │
    │                    ├────────────────────►│
    │                    │                     │
    │                    │  No: 403 Forbidden  │
    │◄───────────────────┤                     │
    │                    │                     │
```

---

## 7. Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                   DEPLOYMENT ARCHITECTURE                        │
└─────────────────────────────────────────────────────────────────┘

PRODUCTION ENVIRONMENT:
                    ┌──────────────┐
                    │   Internet   │
                    └──────┬───────┘
                           │
                    ┌──────▼───────┐
                    │   Cloudflare │
                    │   CDN + DNS  │
                    └──────┬───────┘
                           │
                    ┌──────▼───────┐
                    │    Vercel    │
                    │  Load Balancer│
                    └──────┬───────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
   ┌────▼────┐        ┌────▼────┐       ┌────▼────┐
   │ Next.js │        │ Next.js │       │ Next.js │
   │Instance1│        │Instance2│       │Instance3│
   └────┬────┘        └────┬────┘       └────┬────┘
        │                  │                  │
        └──────────────────┼──────────────────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
   ┌────▼────┐        ┌────▼────┐       ┌────▼────┐
   │PostgreSQL        │  Redis  │       │  AWS S3 │
   │ Primary │        │  Cache  │       │ Storage │
   └────┬────┘        └─────────┘       └─────────┘
        │
   ┌────▼────┐
   │PostgreSQL
   │ Replica │
   └─────────┘

MONITORING & LOGGING:
┌─────────────────────────────────────────────────────────────────┐
│                                                                  │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐ │
│  │  Sentry  │    │ Winston  │    │ Vercel   │    │ Google   │ │
│  │  Errors  │    │   Logs   │    │Analytics │    │Analytics │ │
│  └──────────┘    └──────────┘    └──────────┘    └──────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

CI/CD PIPELINE:
┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐
│  Git   │───►│ GitHub │───►│  Test  │───►│ Build  │───►│ Deploy │
│ Commit │    │ Actions│    │  Run   │    │  App   │    │ Vercel │
└────────┘    └────────┘    └────────┘    └────────┘    └────────┘
                                                              │
                                                              ▼
                                                         ┌────────┐
                                                         │ Health │
                                                         │ Check  │
                                                         └────────┘
```

---

## 8. Data Flow Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                       DATA FLOW DIAGRAM                          │
└─────────────────────────────────────────────────────────────────┘

TEST CREATION DATA FLOW:
┌─────────┐
│ Teacher │
│ uploads │
│  file   │
└────┬────┘
     │
     ▼
┌─────────────┐
│   Formdata  │
│   (PDF)     │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ File Parser │
│ (pdf-parse) │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  Raw Text   │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  LLM Parser │
│  (GPT-4)    │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  Questions  │
│   (JSON)    │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  Validation │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  Database   │
│   (Prisma)  │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Test Object │
│ + shareLink │
└─────────────┘

TEST TAKING DATA FLOW:
┌─────────┐
│ Student │
│  starts │
│  test   │
└────┬────┘
     │
     ▼
┌─────────────┐
│Create       │
│TestAttempt  │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Load        │
│ Questions   │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Student     │
│ Answers     │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Save Answer │
│ (per Q)     │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Submit      │
│ Attempt     │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Auto-grade  │
│ (MCQ, etc)  │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Calculate   │
│   Score     │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Update    │
│  Attempt    │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Return    │
│  Results    │
└─────────────┘
```

---

## 9. Security Layers

```
┌─────────────────────────────────────────────────────────────────┐
│                      SECURITY LAYERS                             │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Layer 7: Application Security                                    │
│ • Input validation                                               │
│ • Output encoding                                                │
│ • Business logic validation                                      │
└─────────────────────────────────────────────────────────────────┘
                           │
┌─────────────────────────▼─────────────────────────────────────┐
│ Layer 6: Authorization                                          │
│ • Role-based access control (RBAC)                              │
│ • Resource ownership checks                                     │
│ • Permission validation                                         │
└─────────────────────────────────────────────────────────────────┘
                           │
┌─────────────────────────▼─────────────────────────────────────┐
│ Layer 5: Authentication                                         │
│ • Session management                                            │
│ • Password hashing (bcrypt)                                     │
│ • Email verification                                            │
└─────────────────────────────────────────────────────────────────┘
                           │
┌─────────────────────────▼─────────────────────────────────────┐
│ Layer 4: API Security                                           │
│ • Rate limiting                                                 │
│ • CORS configuration                                            │
│ • Request validation                                            │
└─────────────────────────────────────────────────────────────────┘
                           │
┌─────────────────────────▼─────────────────────────────────────┐
│ Layer 3: Transport Security                                     │
│ • HTTPS/TLS encryption                                          │
│ • Secure cookies (HttpOnly, SameSite)                           │
│ • HSTS headers                                                  │
└─────────────────────────────────────────────────────────────────┘
                           │
┌─────────────────────────▼─────────────────────────────────────┐
│ Layer 2: Infrastructure Security                                │
│ • Firewall rules                                                │
│ • DDoS protection (Cloudflare)                                  │
│ • Network isolation                                             │
└─────────────────────────────────────────────────────────────────┘
                           │
┌─────────────────────────▼─────────────────────────────────────┐
│ Layer 1: Data Security                                          │
│ • Database encryption at rest                                   │
│ • Encrypted backups                                             │
│ • Secure key management                                         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 10. Scalability Path

```
┌─────────────────────────────────────────────────────────────────┐
│                     SCALABILITY PATH                             │
└─────────────────────────────────────────────────────────────────┘

PHASE 1: 0-1,000 Users (Current)
┌────────────────────────────────────┐
│  ┌──────────┐    ┌──────────┐     │
│  │ Next.js  │───►│PostgreSQL│     │
│  │  Single  │    │  Single  │     │
│  │ Instance │    │ Instance │     │
│  └──────────┘    └──────────┘     │
└────────────────────────────────────┘

PHASE 2: 1,000-10,000 Users
┌────────────────────────────────────┐
│  ┌──────────┐    ┌──────────┐     │
│  │ Next.js  │───►│PostgreSQL│     │
│  │ Multiple │    │ Primary  │     │
│  │Instances │    └────┬─────┘     │
│  └────┬─────┘         │           │
│       │          ┌────▼─────┐     │
│       │          │PostgreSQL│     │
│       │          │ Replica  │     │
│       │          └──────────┘     │
│       │                            │
│       │          ┌──────────┐     │
│       └─────────►│  Redis   │     │
│                  │  Cache   │     │
│                  └──────────┘     │
└────────────────────────────────────┘

PHASE 3: 10,000+ Users
┌────────────────────────────────────────────────────────┐
│  ┌────────────┐                                        │
│  │   CDN      │                                        │
│  │(Cloudflare)│                                        │
│  └─────┬──────┘                                        │
│        │                                                │
│  ┌─────▼──────┐                                        │
│  │Load Balancer                                        │
│  └─────┬──────┘                                        │
│        │                                                │
│  ┌─────┴──────┬──────────┬──────────┐                │
│  │            │          │          │                │
│  ▼            ▼          ▼          ▼                │
│┌────┐      ┌────┐    ┌────┐    ┌────┐              │
││App1│      │App2│    │App3│    │App4│              │
│└─┬──┘      └─┬──┘    └─┬──┘    └─┬──┘              │
│  │           │         │         │                   │
│  └───────────┴─────────┴─────────┘                   │
│              │                                        │
│  ┌───────────┴───────────┬──────────┐               │
│  │                       │          │               │
│  ▼                       ▼          ▼               │
│┌─────────┐          ┌────────┐  ┌────────┐         │
││PostgreSQL          │ Redis  │  │  AWS   │         │
││ Primary │          │Cluster │  │   S3   │         │
│└────┬────┘          └────────┘  └────────┘         │
│     │                                                │
│  ┌──┴───┬───────┐                                   │
│  ▼      ▼       ▼                                   │
│┌────┐┌────┐  ┌────┐                                │
││Rep1││Rep2│  │Rep3│                                │
│└────┘└────┘  └────┘                                │
└────────────────────────────────────────────────────────┘
```

---

This visual reference guide complements the detailed architecture documentation and provides quick visual understanding of the system design.



